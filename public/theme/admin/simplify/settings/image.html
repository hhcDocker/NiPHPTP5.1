<div class="smart-widget">
    <div class="smart-widget-header">
        {$SITE_DATA.SUB_TITLE}
    </div>
    <div class="smart-widget-inner">
        <div class="smart-widget-body">
            <form action="" method="post" class="form-horizontal">
                <div class="form-group">
                    <label for="website_name" class="col-lg-2 control-label">{:lang('auto remove image')}</label>
                    <div class="col-lg-10">
                        <div class="checkbox inline-block">
                            <div class="custom-checkbox">
                                <input type="checkbox" name="auto_image" id="auto_image" class="checkbox-red" value="1">
                                <label for="auto_image"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                {:lang('auto remove image info')}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('article module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="article_module_width" class="form-control" id="article_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="article_module_height" class="form-control" id="article_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('picture module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="picture_module_width" class="form-control" id="picture_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="picture_module_height" class="form-control" id="picture_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('download module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="download_module_width" class="form-control" id="download_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="download_module_height" class="form-control" id="download_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('page module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="page_module_width" class="form-control" id="page_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="page_module_height" class="form-control" id="page_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('product module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="product_module_width" class="form-control" id="product_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="product_module_height" class="form-control" id="product_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('job module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="job_module_width" class="form-control" id="job_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="job_module_height" class="form-control" id="job_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('link module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="link_module_width" class="form-control" id="link_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="link_module_height" class="form-control" id="link_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('ask module')}</label>
                    <div class="col-lg-10">
                        <div class="row">
                            <div class="col-lg-2">
                                <input type="text" name="ask_module_width" class="form-control" id="ask_module_width" value="">
                            </div>
                            <div class="col-lg-2">
                                <input type="text" name="ask_module_height" class="form-control" id="ask_module_height" value="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('add water')}</label>
                    <div class="col-lg-10">
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs add_water1">
                                <input type="radio" id="add_water1" name="add_water" value="1">
                                <label for="add_water1"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                {:lang('button open')}
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs add_water2">
                                <input type="radio" id="add_water2" name="add_water" value="0">
                                <label for="add_water2"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                {:lang('button close')}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('water type')}</label>
                    <div class="col-lg-10">
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_type1">
                                <input type="radio" id="water_type1" name="water_type" value="1">
                                <label for="water_type1"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                {:lang('water type image')}
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_type2">
                                <input type="radio" id="water_type2" name="water_type" value="0">
                                <label for="water_type2"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                {:lang('water type text')}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="website_keywords" class="col-lg-2 control-label">{:lang('water location')}</label>
                    <div class="col-lg-10">
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location1">
                                <input type="radio" id="water_location1" name="water_location" value="1">
                                <label for="water_location1"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                上左
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location2">
                                <input type="radio" id="water_location2" name="water_location" value="2">
                                <label for="water_location2"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                上中
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location3">
                                <input type="radio" id="water_location3" name="water_location" value="3">
                                <label for="water_location3"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                上右
                            </div>
                        </div>
                        <br>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location4">
                                <input type="radio" id="water_location4" name="water_location" value="4">
                                <label for="water_location4"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                中左
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location5">
                                <input type="radio" id="water_location5" name="water_location" value="5">
                                <label for="water_location5"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                中间
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location6">
                                <input type="radio" id="water_location6" name="water_location" value="6">
                                <label for="water_location6"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                中右
                            </div>
                        </div>
                        <br>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location7">
                                <input type="radio" id="water_location7" name="water_location" value="7">
                                <label for="water_location7"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                下左
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location8">
                                <input type="radio" id="water_location8" name="water_location" value="8">
                                <label for="water_location8"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                下中
                            </div>
                        </div>
                        <div class="radio inline-block">
                            <div class="custom-radio m-right-xs water_location9">
                                <input type="radio" id="water_location9" name="water_location" value="9">
                                <label for="water_location9"></label>
                            </div>
                            <div class="inline-block vertical-top">
                                下右
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="water_text" class="col-lg-2 control-label">{:lang('water text')}</label>
                    <div class="col-lg-10">
                        <input type="text" name="water_text" id="water_text" class="form-control" value="">
                    </div>
                </div>
                <div class="form-group">
                    <label for="water_image" class="col-lg-2 control-label">{:lang('water image')}</label>
                    <div class="col-lg-10">
                        <input type="text" name="water_image" id="water_image" class="form-control" value="">
                        <button type="button" class="btn btn-success marginTB-xs" id="upload" >{:lang('button upload')}</button>
                        <img  style="display: none;" id="img-water_image" width="100">
                    </div>
                </div>


                <div class="form-group">
                    <div class="col-lg-offset-2 col-lg-10">
                        {:token()}
                        <input type="submit" value="{:lang('button save')}" class="btn btn-info marginTB-xs">
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
$.pjax({
    url: request.ajax.query,
    type: "post",
    data: {
        timestamp: $.timestamp(),
        token: "{$Think.const.API_TOKEN}",
        method: "settings.image.query"
    },
    success: function(result){
        if (result.code === "SUCCESS") {
            for (index in result.data) {
                if (index == 'auto_image' && result.data[index]) {
                    $(".auto_image").addClass("checked");
                    $("#auto_image").attr("checked", "checked");
                } else if (index == "add_water") {
                    $(".add_water"+result.data[index]).addClass("checked");
                    $("#add_water"+result.data[index]).attr("checked", "checked");
                } else if (index == "water_type") {
                    $(".water_type"+result.data[index]).addClass("checked");
                    $("#water_type"+result.data[index]).attr("checked", "checked");
                } else if (index == "water_location") {
                    $(".water_location"+result.data[index]).addClass("checked");
                    $("#water_location"+result.data[index]).attr("checked", "checked");
                } else {
                    $("#"+index).val($.htmlDecode(result.data[index]));
                }
            }
            $("#img-water_image").attr("src", request.domain+result.data.water_image);
            $("#img-water_image").show();
        }
    }
});

$.uiPopup({
    element: "#upload",
    title:   "上传",
    content: "<form id='uploadForm' enctype='multipart/form-data'><input type='file' name='upload' id='upload-file' /></form>",
    footer:  "<input type='button' class='btn btn-info marginTB-xs upload-btn' />"
});

$(".upload-btn").click(function(){
    var data = new FormData($("#uploadForm")[0]);
        data.append("method", "settings.image.upload");
        data.append("timestamp", $.timestamp());
        data.append("type", "water");

    $.upload({
        url: request.ajax.upload,
        type: "post",
        data: data,
        success: function(result) {
            var dir = result.data.save_dir + result.data.file_name;
            $("#water_image").val(dir);
            $("#img-water_image").attr("src",  result.data.domain + dir);
            $.uiPopup({}, "hide");
        }
    });
});

$("form").submit(function(){
    var form_data = "method=settings.image.editor";
        form_data += "&token={$Think.const.API_TOKEN}";
        form_data += "&timestamp=" + $.timestamp();
        form_data += "&"+$(this).serialize();
    $.pjax({
        url: request.ajax.handle,
        async: false,
        type: "post",
        data: form_data,
        success: function(result){
            handle(result);
        }
    });
    return false;
});
</script>
