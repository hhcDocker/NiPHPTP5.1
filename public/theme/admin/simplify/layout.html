<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{$TITLE}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    {css href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css,https://cdn.bootcss.com/font-awesome/4.1.0/css/font-awesome.min.css,https://cdn.bootcss.com/ionicons/1.5.2/css/ionicons.min.css,__CSS__morris.css,https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css,__CSS__simplify.min.css,__STATIC__layout/css/layout-2.0.1.css" /}
    {js href="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js,https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js,https://cdn.bootcss.com/flot/0.8.3/jquery.flot.min.js,https://cdn.bootcss.com/jQuery-slimScroll/1.3.8/jquery.slimscroll.min.js,__JS__jquery.popupoverlay.min.js,__JS__owl.carousel.min.js,__JS__modernizr.min.js,__STATIC__layout/js/layout-2.0.1.js"}
    <script type="text/javascript">
    var request = {
        domain:     "__DOMAIN__",
        api: {
            query:  "__DOMAIN__admin/api/query.shtml",
            settle: "__DOMAIN__admin/api/settle.shtml",
            upload: "__DOMAIN__admin/api/upload.shtml",
        },
        static:     "__STATIC__",
        css:        "__CSS__",
        js:         "__JS__",
        img:        "__IMG__",
        controller: "{$Request.controller|lower}",
        action:     "{$Request.action}",
    };
    /**
     * handle
     * @param mixed  _result
     * @param string _url
     * @param string _reload
     * return
     */
    function handle(_result, _url, _reload) {
        if (_result.msg === "ILLEGAL") {
            $.reload();
        } else if (_result.msg === "SUCCESS") {
            if (_result.code === "SUCCESS") {
                $.uiToast(_result.msg);
                if (typeof(_url) != "undefined" && _url) {
                    $.redirect(request.domain+_url);
                    return false;
                }
            } else {
                $.uiToast(_result.msg);
            }

            if (typeof(_reload) == "undefined" && _reload) {
                $.reload();
            }
        } else {
            $.uiToast(_result.msg);
            $.reload();
        }
    }
    function eachToOption(_data, _value, _name, _selected, _rep) {
        if (typeof(_rep) == "undefined") {
            _rep = "";
        }

        var option = "";
        for (var index in _data) {
            option += "<option value='"+_data[index][_value]+"'";
            if (_selected == _data[index][_value]) {
                option += " selected ";
            }

            option += ">"+_rep+_data[index][_name]+"</option>";
            if (typeof(_data[index].child) != "undefined") {
                option += eachToOption(_data[index].child, _value, _name, _selected, _rep+"--");
            }
        }

        return option;
    }
    function eachToInput(_data) {
        for (var index in _data) {
            var type = $("#"+index).attr("type");
            if (type == "text" || type == "hidden") {
                $("#"+index).val(_data[index]);
            } else if (typeof(type) == "undefined") {
                $("#"+index).val(_data[index]);
            } else {

            }
            var rule = /^[a-z0-9]+$/;
            if (rule.test(_data[index])) {
                console.log(_data[index]);

                var type = $("#"+index+_data[index]).attr("type");
                if (type == "radio") {
                    $("#"+index+_data[index]).attr("checked", "checked");
                    $("."+index+_data[index]).addClass("checked");
                }
            }

        }
    }
    function pagingToAjax() {
        var ele = $("#paging a").eleEach();
        for (var index in ele) {
            $(ele[index].self).attr("url", ele[index].href);
            $(ele[index].self).removeAttr("href");
        }
    }
    </script>
</head>

<body class="overflow-hidden">

{neq name="Request.controller" value="Account"}
<div class="wrapper preload">
{include file="header,sidebar" /}
    <div class="main-container">
        <div class="padding-md">
            <div class="row">
                <div class="col-sm-12">
                    <ol class="breadcrumb">{$BREADCRUMB|raw}</ol>
                </div>
            </div>

            {__CONTENT__}

        </div>
    </div>

    <footer class="footer">
        <span class="footer-brand">
            <strong class="text-danger">NiPHP</strong> Admin
        </span>
        <p class="no-margin">
            Copyright &copy; 2013-{:date('Y')}
            <a href="http://www.NiPHP.com" target="_blank"><strong>www.NiPHP.com</strong></a>
            <span>{:use_time_memory()}</span>
        </p>
    </footer>
</div>
{else/}

{__CONTENT__}

{/neq}
{js href="__JS__simplify/simplify.js" /}
<script type="text/javascript">
$("._handle_logout").click(function(){
    $.loading({
        url: request.api.settle,
        data: {
            method: "account.logout.logout"
        }
    }, function(result){
        handle(result, "admin/account/login.shtml");
    });
});
</script>
</body>
</html>
